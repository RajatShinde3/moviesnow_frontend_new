# ğŸ¨ MoviesNow Frontend - Visual Flow Diagrams

## Navigation & User Journey Maps

---

## 1. ğŸ§­ **COMPLETE NAVIGATION MAP**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          MODERN NAVIGATION BAR                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  MoviesNow  |  Home  Movies  Series  Anime  Trending          â”‚
â”‚  â”‚ MN  â”‚                     â”€â”€â”€â”€                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜                                                                 â”‚
â”‚              [ğŸ” Search]  [ğŸ‘‘ Go Premium]  [U Avatar Menu]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                â”‚                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
            â”‚   Home   â”‚    â”‚  Browse  â”‚    â”‚ Trending â”‚
            â”‚ /home    â”‚    â”‚ /browse  â”‚    â”‚/trending â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚         â”‚           â”‚   â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚Continueâ”‚ â”‚  New  â”‚ â”‚   Popular   â”‚
   â”‚Watchingâ”‚ â”‚Releaseâ”‚ â”‚   Content   â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”‚         â”‚             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚Title Page â”‚
            â”‚/title/slugâ”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚        â”‚        â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚  Play  â”‚ â”‚Add â”‚ â”‚Downloadâ”‚
    â”‚/watch/ â”‚ â”‚Listâ”‚ â”‚        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ğŸ” **AUTHENTICATION FLOW - DETAILED**

### **New User Journey**

```
START: Unauthenticated User
         â”‚
         â”œâ”€â”€â†’ Visits Landing Page (/)
         â”‚    â”œâ”€ AnimeSugeNav (public navigation)
         â”‚    â”œâ”€ AnimeSugeHome (hero + content preview)
         â”‚    â””â”€ "Sign Up" button
         â”‚
         â”œâ”€â”€â†’ Clicks "Sign Up"
         â”‚    â”‚
         â–¼    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  /signup       â”‚
    â”‚  Registration  â”‚
    â”‚  Form          â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€ Enter: Email, Password, Name
         â”‚
         â–¼
    POST /auth/signup
         â”‚
         â”œâ”€ Success: Account created
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Email Sent     â”‚
    â”‚ "Check inbox"  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â†’ User checks email
         â”‚
         â”œâ”€â”€â†’ Clicks verification link
         â”‚
         â–¼
    /verify-email?token=abc123
         â”‚
         â–¼
    POST /auth/verify-email
         â”‚
         â”œâ”€ Success: Email verified âœ…
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Redirect to   â”‚
    â”‚    /login      â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    [Continue to Login Flow â†’]
```

---

### **Returning User Login (NO MFA)**

```
START: User visits /login
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Login Form         â”‚
    â”‚  - Email            â”‚
    â”‚  - Password         â”‚
    â”‚  [Sign In Button]   â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ User enters credentials
          â”‚
          â–¼
    POST /auth/login
          â”‚
          â”œâ”€ Response: { requires_mfa: false, access_token, ... }
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Store Access Token  â”‚
    â”‚ authStore.setToken()â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ Refresh token set in HttpOnly cookie (backend)
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Check Redirect Path â”‚
    â”‚ sessionStorage      â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ Intended path exists?
          â”‚
          â”œâ”€â”€ YES â†’ Redirect to intended page
          â”‚
          â””â”€â”€ NO  â†’ Redirect to /home
                       â”‚
                       â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   HOME      â”‚
                  â”‚   /home     â”‚
                  â”‚   âœ… LOGGED IN
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **Login with MFA Enabled**

```
START: User visits /login
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Login Form         â”‚
    â”‚  - Email            â”‚
    â”‚  - Password         â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
    POST /auth/login
          â”‚
          â”œâ”€ Response: { requires_mfa: true, login_session_id: "xyz" }
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Store session_id         â”‚
    â”‚ sessionStorage           â”‚
    â”‚ "auth:mfa_session" = xyz â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ Redirect to /mfa
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   MFA Verification  â”‚
    â”‚   /mfa              â”‚
    â”‚                     â”‚
    â”‚   Enter 6-digit     â”‚
    â”‚   TOTP code         â”‚
    â”‚   [___][___][___]   â”‚
    â”‚   [___][___][___]   â”‚
    â”‚                     â”‚
    â”‚   [Verify Button]   â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ User enters code from authenticator app
          â”‚
          â–¼
    POST /auth/mfa/verify
    {
      code: "123456",
      login_session_id: "xyz"
    }
          â”‚
          â”œâ”€ Code valid?
          â”‚
          â”œâ”€â”€ INVALID â†’ Show error, allow retry
          â”‚
          â””â”€â”€ VALID   â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ Response:           â”‚
                 â”‚ { access_token,     â”‚
                 â”‚   refresh_token }   â”‚
                 â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”œâ”€ Store access token
                       â”‚
                       â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ Clear MFA session   â”‚
                 â”‚ sessionStorage      â”‚
                 â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”œâ”€ Check intended path
                       â”‚
                       â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚   HOME      â”‚
                 â”‚   /home     â”‚
                 â”‚   âœ… LOGGED IN
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **Protected Route Access (Token Expired)**

```
USER NAVIGATES: /home â†’ /settings/security
                              â”‚
                              â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  AuthGate    â”‚
                        â”‚  Renders     â”‚
                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”œâ”€ Calls useMe()
                               â”‚
                               â–¼
                        GET /user/me
                        (with Bearer token)
                               â”‚
                               â”œâ”€ Token expired?
                               â”‚
                               â””â”€â”€ YES â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚  401 Response  â”‚
                                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â”œâ”€ API Client detects 401
                                         â”‚
                                         â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ Auto Token Refresh â”‚
                                    â”‚ POST /auth/refresh â”‚
                                    â”‚ (HttpOnly cookie)  â”‚
                                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â”œâ”€ Refresh valid?
                                         â”‚
                                         â”œâ”€â”€ INVALID â†’ Clear tokens, redirect /login
                                         â”‚
                                         â””â”€â”€ VALID   â–¼
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚ New Access Token â”‚
                                              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                                   â”œâ”€ Store new token
                                                   â”‚
                                                   â–¼
                                              RETRY GET /user/me
                                              (with new token)
                                                   â”‚
                                                   â”œâ”€ Success
                                                   â”‚
                                                   â–¼
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚ User Data      â”‚
                                              â”‚ Returned       â”‚
                                              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                                   â”œâ”€ AuthGate passes
                                                   â”‚
                                                   â–¼
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚ Settings Page  â”‚
                                              â”‚ Renders âœ…     â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ğŸ’ **SUBSCRIPTION & PREMIUM FLOW**

### **Free User â†’ Premium Upgrade**

```
START: Free User browsing content
         â”‚
         â”œâ”€ Sees "Go Premium" button in navbar
         â”‚
         â”œâ”€ Clicks button
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  /subscribe             â”‚
    â”‚  Subscription Plans     â”‚
    â”‚                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ Premium Monthly   â”‚  â”‚
    â”‚  â”‚ $9.99/month       â”‚  â”‚
    â”‚  â”‚ [Select Plan]     â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ Premium Yearly    â”‚  â”‚
    â”‚  â”‚ $99.99/year       â”‚  â”‚
    â”‚  â”‚ Save 17%!         â”‚  â”‚
    â”‚  â”‚ [Select Plan]     â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ User selects plan
          â”‚
          â–¼
    POST /subscriptions/create-checkout
          â”‚
          â”œâ”€ Response: { checkout_url: "https://stripe.com/..." }
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Redirect to Stripe     â”‚
    â”‚  Checkout               â”‚
    â”‚                         â”‚
    â”‚  [Card Details Form]    â”‚
    â”‚  [Pay Button]           â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ User enters payment details
          â”‚
          â”œâ”€ Clicks "Pay"
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Stripe Processes       â”‚
    â”‚  Payment                â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ Payment success
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Webhook Received       â”‚
    â”‚  Backend:               â”‚
    â”‚  subscription.created   â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ Update database: is_premium = true
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Stripe Redirects to    â”‚
    â”‚  /subscription/success  â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Success Page                       â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ âœ… Welcome to Premium!        â”‚  â”‚
    â”‚  â”‚                               â”‚  â”‚
    â”‚  â”‚ Your features:                â”‚  â”‚
    â”‚  â”‚ â€¢ Ad-free streaming           â”‚  â”‚
    â”‚  â”‚ â€¢ Direct downloads            â”‚  â”‚
    â”‚  â”‚ â€¢ 1080p quality               â”‚  â”‚
    â”‚  â”‚ â€¢ 4 devices                   â”‚  â”‚
    â”‚  â”‚                               â”‚  â”‚
    â”‚  â”‚ [Start Watching â†’]            â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ SubscriptionContext refetches
          â”‚
          â–¼
    GET /subscriptions/status
          â”‚
          â”œâ”€ Response: { is_premium: true, status: "active", ... }
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ isPremium = true âœ…     â”‚
    â”‚ All premium features    â”‚
    â”‚ now unlocked            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **Premium Download vs Free Download**

```
PREMIUM USER DOWNLOAD FLOW
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
User on Title Page (/title/movie-xyz)
         â”‚
         â”œâ”€ Clicks "Download" button
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Quality Selector        â”‚
    â”‚ â—‹ 480p                  â”‚
    â”‚ â—‹ 720p                  â”‚
    â”‚ â— 1080p (selected)      â”‚
    â”‚ [Download Button]       â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ DownloadButton checks: canDirectDownload() â†’ true
          â”‚
          â–¼
    POST /downloads/request
    { title_id: "xyz", quality: "1080p" }
          â”‚
          â–¼
    Backend:
    â”œâ”€ Verify user is premium âœ…
    â”œâ”€ Generate signed S3 URL (30min expiry)
    â”‚
    â–¼
    Response: {
      download_url: "https://s3.amazonaws.com/movies/xyz-1080p.mp4?signature=..."
    }
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Browser Downloads       â”‚
    â”‚ Immediately             â”‚
    â”‚ âœ… Direct Download      â”‚
    â”‚ No ads, no redirect     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


FREE USER DOWNLOAD FLOW
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
User on Title Page (/title/movie-xyz)
         â”‚
         â”œâ”€ Clicks "Download" button
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Quality Selector        â”‚
    â”‚ â—‹ 480p                  â”‚
    â”‚ â— 720p (selected)       â”‚
    â”‚ âœ— 1080p (locked ğŸ”’)     â”‚
    â”‚ [Download Button]       â”‚
    â”‚ (Shows "View Ads")      â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ DownloadButton checks: canDirectDownload() â†’ false
          â”‚
          â–¼
    POST /downloads/request
    { title_id: "xyz", quality: "720p" }
          â”‚
          â–¼
    Backend:
    â”œâ”€ Verify user is free tier
    â”œâ”€ Get ad redirect URL from config
    â”‚
    â–¼
    Response: {
      redirect_url: "https://ads.example.com/download?file=xyz&token=abc123"
    }
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Browser Redirects to Ad Website    â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Ad Website                          â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚ Please view ads to continue     â”‚ â”‚
    â”‚ â”‚                                 â”‚ â”‚
    â”‚ â”‚ [  Advertisement Display  ]     â”‚ â”‚
    â”‚ â”‚                                 â”‚ â”‚
    â”‚ â”‚ Download starts in: 45 seconds  â”‚ â”‚
    â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘            â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ User waits for countdown
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Countdown Complete                  â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚ âœ… Ready to download            â”‚ â”‚
    â”‚ â”‚                                 â”‚ â”‚
    â”‚ â”‚ [Download Movie â†’]              â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ User clicks download link
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Download Starts         â”‚
    â”‚ âœ… File downloading     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ğŸ¬ **CONTENT VIEWING FLOW**

### **Browsing â†’ Watching**

```
START: User on /home
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Home Page                           â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚ Hero Section                    â”‚ â”‚
    â”‚ â”‚ Featured Movie: "Inception"     â”‚ â”‚
    â”‚ â”‚ [â–¶ Play] [+ Watchlist]          â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                                     â”‚
    â”‚ Trending Now                        â”‚
    â”‚ [Card] [Card] [Card] [Card] â†’      â”‚
    â”‚                                     â”‚
    â”‚ New Releases                        â”‚
    â”‚ [Card] [Card] [Card] [Card] â†’      â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ User clicks on a content card
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Title Details Page                  â”‚
    â”‚ /title/inception                    â”‚
    â”‚                                     â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚ Poster    â”‚ Inception           â”‚ â”‚
    â”‚ â”‚ Image     â”‚ 2010 â€¢ Sci-Fi       â”‚ â”‚
    â”‚ â”‚           â”‚ â­ 8.8/10           â”‚ â”‚
    â”‚ â”‚           â”‚                     â”‚ â”‚
    â”‚ â”‚           â”‚ Description...      â”‚ â”‚
    â”‚ â”‚           â”‚                     â”‚ â”‚
    â”‚ â”‚           â”‚ [â–¶ Play Movie]      â”‚ â”‚
    â”‚ â”‚           â”‚ [+ Watchlist]       â”‚ â”‚
    â”‚ â”‚           â”‚ [â¬‡ Download]        â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                                     â”‚
    â”‚ Cast & Crew                         â”‚
    â”‚ Reviews                             â”‚
    â”‚ Similar Titles                      â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ User clicks "Play Movie"
          â”‚
          â–¼
    POST /playback/sessions/start
    { title_id: "inception" }
          â”‚
          â”œâ”€ Create playback session
          â”‚
          â–¼
    Response: {
      session_id: "session-xyz",
      stream_url: "https://cdn.../inception.m3u8",
      quality_variants: ["480p", "720p", "1080p"],
      scene_markers: {
        intro_start: 0,
        intro_end: 45,
        credits_start: 8820
      }
    }
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Player Page                                 â”‚
    â”‚ /watch/inception                            â”‚
    â”‚                                             â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚                                         â”‚ â”‚
    â”‚ â”‚                                         â”‚ â”‚
    â”‚ â”‚         [  VIDEO PLAYER  ]              â”‚ â”‚
    â”‚ â”‚                                         â”‚ â”‚
    â”‚ â”‚         HLS.js Adaptive Streaming       â”‚ â”‚
    â”‚ â”‚                                         â”‚ â”‚
    â”‚ â”‚ â–¶ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¸â”€â”€â”€â”€â”€â”€ 1:23:45       â”‚ â”‚
    â”‚ â”‚   [ğŸ”Š][CC][âš™Quality][â›¶Fullscreen]      â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                                             â”‚
    â”‚ [Skip Intro] â† appears at 0:00-0:45        â”‚
    â”‚ [Skip Credits] â† appears at 2:27:00        â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ Video plays
          â”‚
          â”œâ”€ Progress tracked every 10 seconds
          â”‚
          â–¼
    POST /playback/progress
    {
      session_id: "session-xyz",
      position: 450,  // seconds
      duration: 8880
    }
          â”‚
          â”œâ”€ User watches to 50% completion
          â”‚
          â”œâ”€ User closes browser
          â”‚
          â–¼
    NEXT SESSION: User returns to /home
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Continue Watching Row               â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚ Inception                       â”‚ â”‚
    â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 50%        â”‚ â”‚
    â”‚ â”‚ [â–¶ Continue]                    â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ User clicks "Continue"
          â”‚
          â–¼
    /watch/inception?t=450
          â”‚
          â”œâ”€ Video resumes at 7:30 âœ…
          â”‚
          â–¼
    [User continues watching]
```

---

## 5. ğŸ‘¤ **USER PROFILE & SETTINGS**

### **Settings Navigation**

```
User in Navigation â†’ Clicks Avatar
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ User Menu Dropdown      â”‚ â† TO BE IMPLEMENTED
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚ ğŸ‘¤ John Doe         â”‚ â”‚
    â”‚ â”‚ john@example.com    â”‚ â”‚
    â”‚ â”‚ ğŸ‘‘ Premium          â”‚ â”‚
    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
    â”‚ â”‚ Switch Profile      â”‚ â”‚
    â”‚ â”‚ My Watchlist        â”‚ â”‚
    â”‚ â”‚ Account Settings    â”‚ â”‚
    â”‚ â”‚ Billing             â”‚ â”‚
    â”‚ â”‚ Help & Support      â”‚ â”‚
    â”‚ â”‚ Sign Out            â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ User clicks "Account Settings"
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Settings Page - Tab Layout                              â”‚
    â”‚ /settings/security (default)                            â”‚
    â”‚                                                         â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚ â”‚ [Security] [Sessions] [Devices] [Account] [More]  â”‚   â”‚
    â”‚ â”‚    â”€â”€â”€â”€â”€â”€                                         â”‚   â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                                         â”‚
    â”‚ Security Overview                                       â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
    â”‚ â”‚ Password                                        â”‚     â”‚
    â”‚ â”‚ Last changed: 30 days ago                       â”‚     â”‚
    â”‚ â”‚ [Change Password â†’]                             â”‚     â”‚
    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
    â”‚ â”‚ Two-Factor Authentication                       â”‚     â”‚
    â”‚ â”‚ âœ… Enabled                                      â”‚     â”‚
    â”‚ â”‚ [Manage MFA â†’]                                  â”‚     â”‚
    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
    â”‚ â”‚ Recovery Codes                                  â”‚     â”‚
    â”‚ â”‚ 8 codes remaining                               â”‚     â”‚
    â”‚ â”‚ [View Codes â†’]                                  â”‚     â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Settings Tab Structure**

```
/settings
    â”‚
    â”œâ”€â”€ /security (DEFAULT)
    â”‚   â”œâ”€â”€ Overview
    â”‚   â”œâ”€â”€ /mfa
    â”‚   â”œâ”€â”€ /password
    â”‚   â””â”€â”€ /recovery-codes
    â”‚
    â”œâ”€â”€ /sessions
    â”‚   â””â”€â”€ Active sessions list with revoke
    â”‚
    â”œâ”€â”€ /devices
    â”‚   â””â”€â”€ Trusted MFA devices
    â”‚
    â”œâ”€â”€ /account
    â”‚   â”œâ”€â”€ Email change
    â”‚   â”œâ”€â”€ /deactivate
    â”‚   â””â”€â”€ /delete
    â”‚
    â”œâ”€â”€ /activity
    â”‚   â””â”€â”€ Security activity log
    â”‚
    â”œâ”€â”€ /alerts
    â”‚   â””â”€â”€ Security alert preferences
    â”‚
    â”œâ”€â”€ /notifications
    â”‚   â””â”€â”€ Notification preferences
    â”‚
    â”œâ”€â”€ /preferences
    â”‚   â””â”€â”€ App preferences
    â”‚
    â””â”€â”€ /subscription
        â””â”€â”€ Subscription management
```

---

## 6. ğŸ”„ **CROSS-TAB LOGOUT FLOW**

```
SCENARIO: User has 3 tabs open (Tab A, Tab B, Tab C)
All tabs logged in as john@example.com

Tab A                    Tab B                    Tab C
  â”‚                        â”‚                        â”‚
  â”œâ”€ User clicks Logout    â”‚                        â”‚
  â”‚                        â”‚                        â”‚
  â–¼                        â”‚                        â”‚
POST /auth/logout          â”‚                        â”‚
  â”‚                        â”‚                        â”‚
  â”œâ”€ Backend revokes       â”‚                        â”‚
  â”‚  refresh token         â”‚                        â”‚
  â”‚                        â”‚                        â”‚
  â–¼                        â”‚                        â”‚
authStore.logout()         â”‚                        â”‚
  â”‚                        â”‚                        â”‚
  â”œâ”€ Clear memory token    â”‚                        â”‚
  â”œâ”€ Clear sessionStorage  â”‚                        â”‚
  â”‚                        â”‚                        â”‚
  â–¼                        â”‚                        â”‚
BroadcastChannel.send      â”‚                        â”‚
"auth:logout"    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â†’ BROADCAST
  â”‚                        â”‚                        â”‚
  â”‚                        â–¼                        â–¼
  â”‚              Receives "auth:logout"   Receives "auth:logout"
  â”‚                        â”‚                        â”‚
  â”‚                        â–¼                        â–¼
  â”‚              authStore.logout()      authStore.logout()
  â”‚                        â”‚                        â”‚
  â”‚                        â”œâ”€ Clear tokens          â”œâ”€ Clear tokens
  â”‚                        â”‚                        â”‚
  â”‚                        â–¼                        â–¼
  â”‚              queryClient.clear()     queryClient.clear()
  â”‚                        â”‚                        â”‚
  â–¼                        â–¼                        â–¼
router.replace('/login') router.replace('/login') router.replace('/login')
  â”‚                        â”‚                        â”‚
  â–¼                        â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /login   â”‚         â”‚ /login   â”‚           â”‚ /login   â”‚
â”‚ Tab A    â”‚         â”‚ Tab B    â”‚           â”‚ Tab C    â”‚
â”‚ LOGGED   â”‚         â”‚ LOGGED   â”‚           â”‚ LOGGED   â”‚
â”‚ OUT âœ…   â”‚         â”‚ OUT âœ…   â”‚           â”‚ OUT âœ…   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ALL TABS SYNCHRONIZED IN <100ms
```

---

## 7. ğŸ¯ **ADMIN CONTENT MANAGEMENT FLOW**

```
Admin User â†’ Navigates to /admin
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Admin Dashboard                     â”‚
    â”‚ /admin                              â”‚
    â”‚                                     â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚ Quick Stats                     â”‚ â”‚
    â”‚ â”‚ â€¢ 1,234 Total Titles            â”‚ â”‚
    â”‚ â”‚ â€¢ 567 Active Users              â”‚ â”‚
    â”‚ â”‚ â€¢ 89 Premium Subscribers        â”‚ â”‚
    â”‚ â”‚ â€¢ 2.3TB Content Delivered       â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                                     â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚Upload â”‚ â”‚ Manage  â”‚ â”‚Analytics â”‚ â”‚
    â”‚ â”‚Contentâ”‚ â”‚ Titles  â”‚ â”‚Dashboard â”‚ â”‚
    â”‚ â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚
    â””â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚          â”‚           â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚                                   â”‚
    â”œâ”€â†’ Upload New Content              â”‚
    â”‚   /admin/upload                   â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚   â”‚ Title: _________________    â”‚ â”‚
    â”‚   â”‚ Type: â— Movie â—‹ Series      â”‚ â”‚
    â”‚   â”‚ Genre: [Select...]          â”‚ â”‚
    â”‚   â”‚                             â”‚ â”‚
    â”‚   â”‚ Video Files:                â”‚ â”‚
    â”‚   â”‚ â€¢ 480p: [Choose File]       â”‚ â”‚
    â”‚   â”‚ â€¢ 720p: [Choose File]       â”‚ â”‚
    â”‚   â”‚ â€¢ 1080p: [Choose File]      â”‚ â”‚
    â”‚   â”‚                             â”‚ â”‚
    â”‚   â”‚ Poster: [Choose Image]      â”‚ â”‚
    â”‚   â”‚ Banner: [Choose Image]      â”‚ â”‚
    â”‚   â”‚                             â”‚ â”‚
    â”‚   â”‚ [Upload Content]            â”‚ â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚            â”‚                      â”‚
    â”‚            â–¼                      â”‚
    â”‚   Multipart S3 Upload            â”‚
    â”‚   Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 70%       â”‚
    â”‚            â”‚                      â”‚
    â”‚            â–¼                      â”‚
    â”‚   âœ… Upload Complete              â”‚
    â”‚   Content ID: title-xyz          â”‚
    â”‚            â”‚                      â”‚
    â”‚            â”œâ”€â†’ Set Download Links â”‚
    â”‚            â”‚   /admin/titles/xyz/ â”‚
    â”‚            â”‚   downloads          â”‚
    â”‚            â”‚                      â”‚
    â”‚            â”‚   480p URL: ______   â”‚
    â”‚            â”‚   720p URL: ______   â”‚
    â”‚            â”‚   1080p URL: ______  â”‚
    â”‚            â”‚                      â”‚
    â”‚            â”‚   [Save Links]       â”‚
    â”‚            â”‚                      â”‚
    â”‚            â–¼                      â”‚
    â”‚   âœ… Content Published            â”‚
    â”‚   Now visible to users           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. ğŸ“± **RESPONSIVE NAVIGATION (MOBILE)**

```
MOBILE VIEW (< 1024px)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [M] MoviesNow        [ğŸ”] [U] [â˜°]  â”‚ â† Compact header
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”œâ”€ User taps hamburger [â˜°]
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Drawer Animation    â”‚
                    â”‚ Slides from right   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           Menu        [âœ•]      â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  Browse                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ ğŸ  Home                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ ğŸ¬ Movies                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ ğŸ“º Series                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ ğŸŒ Anime                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ ğŸ”¥ Trending              â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ ğŸ‘‘ Upgrade to Premium    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Drawer Features:
âœ… Animated slide-in from right
âœ… Backdrop overlay (semi-transparent)
âœ… Close on backdrop click
âœ… Close on route change
âœ… Smooth spring animation
âœ… Touch-friendly tap targets
```

---

## ğŸ“Š **COMPONENT LIFECYCLE DIAGRAM**

```
App Initialization
         â”‚
         â–¼
    RootLayout (app/layout.tsx)
         â”‚
         â”œâ”€â†’ ErrorBoundary
         â”‚   â””â”€â†’ Catches React errors, shows fallback UI
         â”‚
         â”œâ”€â†’ ReactQueryProvider
         â”‚   â””â”€â†’ TanStack Query client setup
         â”‚       â”œâ”€ Query cache
         â”‚       â”œâ”€ Mutation cache
         â”‚       â””â”€ Default options
         â”‚
         â”œâ”€â†’ ReauthProvider
         â”‚   â””â”€â†’ Step-up authentication context
         â”‚       â””â”€ Reauth dialog management
         â”‚
         â”œâ”€â†’ SubscriptionProvider
         â”‚   â””â”€â†’ Premium status management
         â”‚       â”œâ”€ Fetches /subscriptions/status
         â”‚       â”œâ”€ Updates every 1 minute
         â”‚       â””â”€ Provides isPremium state
         â”‚
         â””â”€â†’ ToastsRoot
             â””â”€â†’ Toast notification system
                 â””â”€ Global toast container

Protected Route Access
         â”‚
         â–¼
    ProtectedLayout ((protected)/layout.tsx)
         â”‚
         â”œâ”€â†’ AuthGate
         â”‚   â”œâ”€â†’ Calls useMe()
         â”‚   â”œâ”€â†’ Checks authentication
         â”‚   â”œâ”€â†’ Checks email verification (if required)
         â”‚   â”œâ”€â†’ Checks roles (if required)
         â”‚   â””â”€â†’ Redirects to /login if fails
         â”‚
         â””â”€â†’ ModernNavigation
             â”œâ”€â†’ Logo & Brand
             â”œâ”€â†’ Desktop Nav Links
             â”œâ”€â†’ Search Overlay
             â”œâ”€â†’ Go Premium Button
             â”œâ”€â†’ User Avatar (TO BE ENHANCED)
             â””â”€â†’ Mobile Menu Drawer

Page Component
         â”‚
         â–¼
    Component Render
         â”‚
         â”œâ”€â†’ useQuery() for data fetching
         â”‚   â”œâ”€â†’ Check cache first
         â”‚   â”œâ”€â†’ Return cached if fresh
         â”‚   â”œâ”€â†’ Fetch from API if stale
         â”‚   â””â”€â†’ Update cache
         â”‚
         â”œâ”€â†’ useMutation() for data updates
         â”‚   â”œâ”€â†’ Optimistic update
         â”‚   â”œâ”€â†’ API call
         â”‚   â”œâ”€â†’ Rollback on error
         â”‚   â””â”€â†’ Refetch on success
         â”‚
         â””â”€â†’ useSubscription() for premium checks
             â”œâ”€â†’ Read cached subscription status
             â”œâ”€â†’ Gate features based on tier
             â””â”€â†’ Show upgrade prompts if needed
```

---

## ğŸ¯ **KEY TAKEAWAYS**

### **Authentication**
- **Memory-first** token storage (never localStorage)
- **Auto-refresh** on 401 (seamless to user)
- **Cross-tab logout** via BroadcastChannel
- **MFA support** with TOTP codes
- **Step-up reauth** for sensitive operations

### **Navigation**
- **Sticky navbar** with scroll-based background
- **Active state** with RED underline (Animesuge theme)
- **Search overlay** with popular searches
- **Mobile drawer** with smooth animations
- **User menu** (needs profile switcher implementation)

### **Subscription**
- **Free tier**: Ads, 720p max, ad-redirect downloads
- **Premium tier**: Ad-free, 1080p, direct downloads, 4 devices
- **Stripe integration** for payments
- **Webhook-driven** status updates
- **Context provider** for app-wide access

### **Content**
- **Transparent cards** (Animesuge signature)
- **HLS adaptive streaming** with quality selection
- **Progress tracking** every 10 seconds
- **Continue watching** row
- **Scene markers** for intro/credits skip

### **Admin**
- **Multipart S3 upload** for large files
- **Quality variants** (480p/720p/1080p)
- **Download link management**
- **Ad redirect configuration**
- **Role-based access** (needs RBAC enforcement)

---

**This visual guide complements the FRONTEND_ARCHITECTURE_MASTER_PROMPT.md document. Use both together for complete understanding of the system.**

ğŸ¬ **Last Updated**: December 28, 2024
